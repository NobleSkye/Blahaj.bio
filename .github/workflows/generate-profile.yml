name: Generate Profile

on:
  issues:
    types: [opened, edited]

jobs:
  generate-profile:
    if: contains(github.event.issue.labels.*.name, 'profile')
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Parse Issue Body
        id: parse
        uses: actions/github-script@v7
        with:
          script: |
            const body = context.payload.issue.body;
            // Parse the issue body and extract profile information
            // Add logic here to generate profile data

      - name: Generate Profile
        run: |
          # Add commands to generate profile page
          echo "Generating profile..."

      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v5
        with:
          commit-message: "feat: add new profile"
          title: "Add profile from issue #${{ github.event.issue.number }}"
          body: "Automatically generated profile from issue #${{ github.event.issue.number }}"
          branch: "profile/${{ github.event.issue.number }}"
